---
import { Image } from 'astro:assets';
import { frame, type FrameProps } from './frame';

type Props = FrameProps & {
  image: {
    src: string;
    alt: string;
  };
  caption?: string;
};

const { image, caption } = Astro.props;
const imageData = (await import(/* @vite-ignore */ image.src)).default as {
  src: string;
  width: number;
  height: number;
  format: string;
};
---

{
  image && (
    <figure class="">
      <Image
        class:list={[frame(Astro.props)]}
        src={image.src}
        alt={image.alt}
        width={imageData.width}
        height={imageData.height}
      />
      {caption && <figcaption class='pl-4 pt-1'>{caption}</figcaption>}
    </figure>
  )
}
